services:
  docs-to-ai:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: docs-to-ai
    image: mcp/docs-to-ai
    
    # Volumes for persistent data
    volumes:
      # ChromaDB database (persists the vector store)
      - ./cache/chromadb:/app/chroma_db
      # Document cache (persists extracted text)
      - ./cache/doc_cache:/app/doc_cache
      # Documents directory (your PDFs and Word docs)
      - ./my-docs:/my-docs:ro  # Read-only to prevent accidental modifications
    
    # Environment variables (optional)
    environment:
      - PYTHONUNBUFFERED=1
      - EMBEDDING_MODEL=all-MiniLM-L6-v2
    
    # Restart policy
    restart: unless-stopped
    
    # Resource limits (optional - adjust based on your needs)
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 4G
        reservations:
          cpus: '1'
          memory: 2G
    
    # Stdin/stdout for MCP protocol
    stdin_open: true
    tty: true
    
    # Command can be overridden
    # command: python mcp_server.py
